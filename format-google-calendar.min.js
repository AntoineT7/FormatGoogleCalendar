var formatGoogleCalendar=function(){"use strict";var a,b=function(b){var d=[];a=b,jQuery.getJSON(b.calendarUrl,function(a){a.items.forEach(function(a){a&&a.hasOwnProperty("status")&&"cancelled"!==a.status&&d.push(a)}),d.sort(c).reverse();var e,h=0,i=0,j=[],k=[],l=[],m=jQuery(b.upcomingSelector),n=jQuery(b.pastSelector);-1===b.pastTopN&&(b.pastTopN=d.length),-1===b.upcomingTopN&&(b.upcomingTopN=d.length),b.past===!1&&(b.pastTopN=0),b.upcoming===!1&&(b.upcomingTopN=0);for(e in d)g(d[e].end.dateTime||d[e].end.date)?h<b.pastTopN&&(j.push(d[e]),h++):l.push(d[e]);l.reverse();for(e in l)i<b.upcomingTopN&&(k.push(l[e]),i++);for(e in j)n.append(f(j[e],b.itemsTagName,b.format));for(e in k)m.append(f(k[e],b.itemsTagName,b.format));0!==m.children().length&&jQuery(b.upcomingHeading).insertBefore(m),0!==n.children().length&&jQuery(b.pastHeading).insertBefore(n)})},c=function(a,b){return new Date(a.start.dateTime||a.start.date).getTime()-new Date(b.start.dateTime||b.start.date).getTime()},d=function(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d},e=function(a,b){var c=j(a),d=j(b);return c.getTime()===d.getTime()-864e5&&0===c.getMinutes()&&0===c.getHours()?!0:!1},f=function(a,b,c){var d=h(a.start.dateTime||a.start.date),f=h(a.end.dateTime||a.end.date),g="undefined"!=typeof a.end.date,i=e(d,f);g&&(f=k(f)),i&&(f=l(f));var j,m=q(d,f,g,i),n="<"+b+">",o=a.summary||"",p=a.description||"",r=a.location||"";for(j=0;j<c.length;j++)c[j]=c[j].toString(),"*summary*"===c[j]?n=n.concat('<span class="summary">'+o+"</span>"):"*date*"===c[j]?n=n.concat('<span class="date">'+m+"</span>"):"*description*"===c[j]?n=n.concat('<span class="description">'+p+"</span>"):"*location*"===c[j]?n=n.concat('<span class="location">'+r+"</span>"):("*location*"===c[j+1]&&""!==r||"*summary*"===c[j+1]&&""!==o||"*date*"===c[j+1]&&""!==m||"*description*"===c[j+1]&&""!==p)&&(n=n.concat(c[j]));return n+"</"+b+">"},g=function(a){var b=new Date(a),c=new Date;return c.getTime()>b.getTime()?!0:!1},h=function(a){return a=new Date(a),[a.getDate(),a.getMonth(),a.getFullYear(),a.getHours(),a.getMinutes(),0,0]},i=function(a){var b=["January","February","March","April","May","June","July","August","September","October","November","December"];return b[a]},j=function(a){return new Date(a[2],a[1],a[0],a[3],a[4]+0,0)},k=function(a){var b=j(a);return b.setTime(b.getTime()-864e5),h(b)},l=function(a){var b=j(a);return b.setTime(b.getTime()-6e4),h(b)},m=function(b,c,d,e){var f="";return!a.sameDayTimes||d||e||(f=" from "+r(b)+" - "+r(c)),i(b[1])+" "+b[0]+", "+b[2]+f},n=function(a,b){return i(a[1])+" "+a[0]+"-"+b[0]+", "+a[2]},o=function(a,b){return i(a[1])+" "+a[0]+"-"+i(b[1])+" "+b[0]+", "+a[2]},p=function(a,b){return i(a[1])+" "+a[0]+", "+a[2]+"-"+i(b[1])+" "+b[0]+", "+b[2]},q=function(a,b,c,d){var e="";return e=a[0]===b[0]?a[1]===b[1]?a[2]===b[2]?m(a,b,c,d):p(a,b):a[2]===b[2]?o(a,b):p(a,b):a[1]===b[1]?a[2]===b[2]?n(a,b):p(a,b):a[2]===b[2]?o(a,b):p(a,b)},r=function(a){var b="",c="AM",d=a[3],e=a[4];return d>=12&&(c="PM",d>=13&&(d-=12)),0===d&&(d=12),e=(10>e?"0":"")+e,b=d+":"+e+c};return{init:function(a){var c={calendarUrl:"https://www.googleapis.com/calendar/v3/calendars/milan.kacurak@gmail.com/events?key=AIzaSyCR3-ptjHE-_douJsn8o20oRwkxt-zHStY",past:!0,upcoming:!0,sameDayTimes:!0,pastTopN:-1,upcomingTopN:-1,itemsTagName:"li",upcomingSelector:"#events-upcoming",pastSelector:"#events-past",upcomingHeading:"<h2>Upcoming events</h2>",pastHeading:"<h2>Past events</h2>",format:["*date*",": ","*summary*"," &mdash; ","*description*"," in ","*location*"]};c=d(c,a),b(c)}}}();